#!/usr/bin/env zsh
# BLUX10K Private Environment Variables Template
# 
# IMPORTANT: This file contains sensitive information.
# - Never commit this file to version control
# - Set permissions to 0600: chmod 600 ~/.config/private/env.zsh
# - Keep backups in secure locations
#
# Copy this file to ~/.config/private/env.zsh and fill in your values
# Source: https://github.com/Justadudeinspace/blux10k

############################################################################
# SECURITY WARNING: PRIVATE CONFIGURATION
############################################################################
echo "üîí Loading BLUX10K private environment..."

############################################################################
# 1) API KEYS & TOKENS
############################################################################

# ----------------------------
# AI/ML Services
# ----------------------------

# OpenAI API
# export OPENAI_API_KEY='sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export OPENAI_ORG_ID='org-xxxxxxxxxxxxxxxxxxxxxxxx'
# export OPENAI_BASE_URL='https://api.openai.com/v1'  # Optional: for custom endpoints

# Anthropic Claude API
# export ANTHROPIC_API_KEY='sk-ant-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export ANTHROPIC_BASE_URL='https://api.anthropic.com'

# Google AI (Gemini)
# export GOOGLE_AI_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export GOOGLE_AI_PROJECT_ID='your-project-id'

# Azure OpenAI
# export AZURE_OPENAI_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export AZURE_OPENAI_ENDPOINT='https://your-resource.openai.azure.com/'
# export AZURE_OPENAI_API_VERSION='2024-02-01'

# Hugging Face
# export HUGGINGFACE_API_KEY='hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export HUGGINGFACE_HUB_CACHE='~/.cache/huggingface/hub'

# Cohere AI
# export COHERE_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Groq AI
# export GROQ_API_KEY='gsk_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# ----------------------------
# Development & Code Services
# ----------------------------

# GitHub
export GITHUB_TOKEN='ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
export GITHUB_USER='YourUsername'
export GITHUB_EMAIL='your.email@example.com'
# export GITHUB_SSH_KEY_PATH='~/.ssh/id_github'

# GitLab
# export GITLAB_TOKEN='glpat-xxxxxxxxxxxxxxxxxxxx'
# export GITLAB_HOST='https://gitlab.com'  # For self-hosted instances

# Bitbucket
# export BITBUCKET_USERNAME='your-username'
# export BITBUCKET_APP_PASSWORD='xxxxxxxxxxxxxxxxxxxx'

# Docker Hub
# export DOCKERHUB_USERNAME='your-username'
# export DOCKERHUB_PASSWORD='your-password'

# Container Registries
# export GHCR_TOKEN='ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export GITLAB_REGISTRY_TOKEN='glpat-xxxxxxxxxxxxxxxxxxxx'

# ----------------------------
# Cloud Providers
# ----------------------------

# AWS
# export AWS_ACCESS_KEY_ID='AKIAxxxxxxxxxxxxxxxx'
# export AWS_SECRET_ACCESS_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export AWS_DEFAULT_REGION='us-east-1'
# export AWS_PROFILE='default'
# export AWS_SESSION_TOKEN=''  # For temporary sessions

# Google Cloud
# export GOOGLE_APPLICATION_CREDENTIALS='~/.config/gcloud/application_credentials.json'
# export GOOGLE_CLOUD_PROJECT='your-project-id'
# export CLOUDSDK_CORE_PROJECT='your-project-id'

# Microsoft Azure
# export AZURE_SUBSCRIPTION_ID='xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'
# export AZURE_TENANT_ID='xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'
# export AZURE_CLIENT_ID='xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx'
# export AZURE_CLIENT_SECRET='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# DigitalOcean
# export DIGITALOCEAN_TOKEN='dop_v1_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export DIGITALOCEAN_ACCESS_TOKEN='dop_v1_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Vultr
# export VULTR_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Linode
# export LINODE_TOKEN='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# ----------------------------
# Infrastructure & DevOps
# ----------------------------

# Terraform
# export TF_VAR_username='your-username'
# export TF_VAR_password='your-password'
# export TF_WORKSPACE='default'
# export TF_CLI_ARGS_init='-lock-timeout=60s'

# Ansible
# export ANSIBLE_VAULT_PASSWORD_FILE='~/.vault_pass.txt'

# Kubernetes
# export KUBECONFIG='~/.kube/config'
# export KUBE_EDITOR='nvim'

# Helm
# export HELM_EXPERIMENTAL_OCI=1

# Docker
# export DOCKER_HOST='unix:///var/run/docker.sock'
# export DOCKER_BUILDKIT=1
# export COMPOSE_DOCKER_CLI_BUILD=1

# ----------------------------
# Monitoring & Analytics
# ----------------------------

# Datadog
# export DATADOG_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export DATADOG_APP_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# New Relic
# export NEW_RELIC_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export NEW_RELIC_ACCOUNT_ID='xxxxxxxx'

# Grafana
# export GRAFANA_API_KEY='glsa_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Prometheus
# export PROMETHEUS_URL='http://localhost:9090'

# ----------------------------
# Communication & Productivity
# ----------------------------

# Slack
# export SLACK_BOT_TOKEN='xoxb-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export SLACK_APP_TOKEN='xapp-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export SLACK_SIGNING_SECRET='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Discord
# export DISCORD_TOKEN='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Telegram Bot
# export TELEGRAM_BOT_TOKEN='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export TELEGRAM_CHAT_ID='-xxxxxxxxxx'

# Notion
# export NOTION_TOKEN='secret_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Linear
# export LINEAR_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Jira
# export JIRA_API_TOKEN='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export JIRA_URL='https://your-domain.atlassian.net'

############################################################################
# 2) DEVELOPMENT & PROGRAMMING
############################################################################

# ----------------------------
# Package Registries
# ----------------------------

# npm
# export NPM_TOKEN='npm_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'
# export NPM_CONFIG_REGISTRY='https://registry.npmjs.org/'

# PyPI
# export TWINE_USERNAME='__token__'
# export TWINE_PASSWORD='pypi-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# RubyGems
# export GEM_HOST_API_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Crates.io (Rust)
# export CARGO_REGISTRY_TOKEN='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

# Maven Central
# export MAVEN_USERNAME='your-username'
# export MAVEN_PASSWORD='your-password'

# ----------------------------
# Language Specific
# ----------------------------

# Node.js
# export NODE_ENV='development'
# export NODE_OPTIONS='--max-old-space-size=4096'
# export NPM_CONFIG_ENGINE_STRICT=true

# Python
# export PYTHONPATH='$HOME/projects:$PYTHONPATH'
# export PYTHONSTARTUP='~/.pythonrc'
# export PIP_REQUIRE_VIRTUALENV=true
# export PIP_DISABLE_PIP_VERSION_CHECK=1

# Rust
# export RUST_LOG='info'
# export RUST_BACKTRACE=1
# export CARGO_HOME='~/.cargo'

# Go
# export GOPATH='$HOME/go'
# export GOBIN='$GOPATH/bin'
# export GO111MODULE='on'

# Java
# export JAVA_HOME='/usr/lib/jvm/java-11-openjdk'
# export MAVEN_OPTS='-Xmx2g -XX:MaxPermSize=512m'

# Ruby
# export GEM_HOME='$HOME/.gem'
# export BUNDLE_PATH='$GEM_HOME'

# PHP
# export COMPOSER_HOME='$HOME/.composer'

############################################################################
# 3) SECURITY & AUTHENTICATION
############################################################################

# ----------------------------
# SSH Configuration
# ----------------------------

# SSH Agent
export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/ssh-agent.socket"
export SSH_KEY_PATH='~/.ssh/id_ed25519'

# SSH Keys (add to ssh-agent)
# ssh-add ~/.ssh/id_ed25519 2>/dev/null
# ssh-add ~/.ssh/id_rsa 2>/dev/null
# ssh-add ~/.ssh/id_github 2>/dev/null

# SSH Config
# export SSH_CONFIG_FILE='~/.ssh/config'

# ----------------------------
# GPG Configuration
# ----------------------------

export GPG_TTY=$(tty)
# export GNUPGHOME='~/.gnupg'

# ----------------------------
# Password Managers
# ----------------------------

# 1Password
# export OP_SESSION='your-session-token'

# LastPass
# export LPASS_DISABLE_PINENTRY=1

# Bitwarden
# export BW_SESSION='your-session-key'

# pass (standard Unix password manager)
# export PASSWORD_STORE_DIR='~/.password-store'

############################################################################
# 4) APPLICATION SPECIFIC
############################################################################

# ----------------------------
# Databases
# ----------------------------

# PostgreSQL
# export PGHOST='localhost'
# export PGPORT=5432
# export PGUSER='postgres'
# export PGPASSWORD='your-password'
# export PGDATABASE='postgres'

# MySQL
# export MYSQL_HOST='localhost'
# export MYSQL_PORT=3306
# export MYSQL_USER='root'
# export MYSQL_PASSWORD='your-password'
# export MYSQL_DATABASE='test'

# MongoDB
# export MONGODB_URI='mongodb://localhost:27017'
# export MONGODB_DATABASE='test'

# Redis
# export REDIS_URL='redis://localhost:6379'
# export REDIS_PASSWORD='your-password'

# ----------------------------
# Message Queues & Caching
# ----------------------------

# RabbitMQ
# export RABBITMQ_URL='amqp://localhost:5672'

# Apache Kafka
# export KAFKA_BROKERS='localhost:9092'

# Memcached
# export MEMCACHED_HOST='localhost:11211'

# ----------------------------
# File Storage
# ----------------------------

# AWS S3
# export S3_BUCKET='your-bucket-name'
# export S3_REGION='us-east-1'

# Google Cloud Storage
# export GCS_BUCKET='your-bucket-name'

# Backblaze B2
# export B2_ACCOUNT_ID='xxxxxxxxxxxxxxxxxxxxxxxx'
# export B2_APPLICATION_KEY='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'

############################################################################
# 5) PRODUCTIVITY & WORKFLOW
############################################################################

# ----------------------------
# Editor & IDE
# ----------------------------

# NeoVim
export EDITOR='nvim'
export VISUAL='nvim'
export SUDO_EDITOR='nvim'

# VS Code
# export VSCODE_PORTABLE='$HOME/.vscode-portable'

# JetBrains IDEs
# export IDEA_JDK='$JAVA_HOME'
# export PYCHARM_JDK='$JAVA_HOME'

# ----------------------------
# Terminal & Shell
# ----------------------------

# BLUX10K Specific
export BLUX10K_ENV='development'
export BLUX10K_DEBUG='0'

# ZSH Configuration
export ZSH_CACHE_DIR="$XDG_CACHE_HOME/zsh"
export ZSH_COMPDUMP="$ZSH_CACHE_DIR/zcompdump"

# History
export HISTFILE="$XDG_STATE_HOME/zsh/history"
export HISTSIZE=100000
export SAVEHIST=100000

# ----------------------------
# Development Tools
# ----------------------------

# fzf
export FZF_DEFAULT_OPTS='--height 40% --layout=reverse --border'
export FZF_DEFAULT_COMMAND='fd --type f --hidden --follow --exclude .git'

# bat
export BAT_THEME='TwoDark'
export BAT_STYLE='numbers,changes,header'

# eza
export EZA_ICON_SPACING=2

# zoxide
export _ZO_EXCLUDE_DIRS='$HOME/.cache/*:$HOME/.local/*:/tmp/*:/proc/*'

# direnv
export DIRENV_LOG_FORMAT=''

# ----------------------------
# Work & Project Specific
# ----------------------------

# Company/Work environment
# export WORK_EMAIL='your.name@company.com'
# export WORK_USERNAME='your-username'
# export WORK_DIR='$HOME/Work'

# Project specific variables
# export PROJECT_NAME='my-project'
# export PROJECT_ENV='development'
# export API_BASE_URL='https://api.example.com'

############################################################################
# 6) SYSTEM & PERFORMANCE
############################################################################

# ----------------------------
# System Preferences
# ----------------------------

# Locale
export LANG='en_US.UTF-8'
export LC_ALL='en_US.UTF-8'

# Timezone
export TZ='America/New_York'

# Browser
export BROWSER='firefox'

# Pager
export PAGER='less'
export LESS='-R'

# ----------------------------
# Performance Tuning
# ----------------------------

# Go
# export GOMAXPROCS=$(nproc)

# Node.js
# export UV_THREADPOOL_SIZE=$(nproc)

# Java
# export JAVA_OPTS='-Xmx2g -Xms1g'

# Python
# export PYTHONUNBUFFERED=1

# ----------------------------
# Network & Proxy
# ----------------------------

# HTTP proxy
# export http_proxy='http://proxy.example.com:8080'
# export https_proxy='http://proxy.example.com:8080'
# export no_proxy='localhost,127.0.0.1,.example.com'

# VPN
# export VPN_HOST='vpn.example.com'

############################################################################
# 7) BLUX10K SPECIFIC CONFIGURATION
############################################################################

# BLUX10K Update System
export SYSUPDATE_LOG_KEEP=10
export SYSUPDATE_KERNELS_KEEP=2
export SYSUPDATE_MAX_RETRIES=3
export SYSUPDATE_TIMEOUT=300
export SYSUPDATE_SKIP_PIP=0  # Set to 1 to skip pip updates

# BLUX10K Plugin System
export ZPLUG_HOME='~/.zplug'
export ZPLUG_USE_CACHE=true
export ZPLUG_CACHE_DIR='$ZPLUG_HOME/cache'

# BLUX10K Theme System
export POWERLEVEL9K_MODE='nerdfont-complete'
export STARSHIP_CONFIG='~/.config/starship/starship.toml'

# BLUX10K Development Paths
export BLUX10K_DEV_DIR='$HOME/Projects/blux10k'
export BLUX10K_CONFIG_DIR='$HOME/.config/blux10k'

############################################################################
# 8) VALIDATION & SECURITY CHECKS
############################################################################

# Function to validate environment
function validate_env() {
    local errors=0
    
    echo "üîç Validating BLUX10K environment..."
    
    # Check for required directories
    local dirs=("$XDG_CONFIG_HOME" "$XDG_CACHE_HOME" "$XDG_STATE_HOME" "$HOME/.config/private")
    for dir in "${dirs[@]}"; do
        if [[ ! -d "$dir" ]]; then
            echo "‚ö†Ô∏è  Directory missing: $dir"
            ((errors++))
        fi
    done
    
    # Check file permissions
    if [[ -f ~/.config/private/env.zsh ]]; then
        local perms=$(stat -f "%A" ~/.config/private/env.zsh 2>/dev/null || stat -c "%a" ~/.config/private/env.zsh 2>/dev/null)
        if [[ "$perms" != "600" ]]; then
            echo "‚ö†Ô∏è  Insecure permissions on env.zsh: $perms (should be 600)"
            echo "   Run: chmod 600 ~/.config/private/env.zsh"
            ((errors++))
        fi
    fi
    
    # Check for sensitive variables that shouldn't be empty
    local sensitive_vars=("GITHUB_TOKEN")
    for var in "${sensitive_vars[@]}"; do
        if [[ -n "${(P)var}" && "${(P)var}" == *"xxxxxxxx"* ]]; then
            echo "‚ö†Ô∏è  $var appears to be using example value"
            ((errors++))
        fi
    done
    
    if [[ $errors -eq 0 ]]; then
        echo "‚úÖ Environment validation passed"
    else
        echo "‚ùå Found $errors issue(s) - please review above warnings"
    fi
}

# Function to mask sensitive values in output
function mask_secrets() {
    local output="$1"
    # Mask API keys, tokens, etc.
    output=$(echo "$output" | sed -E 's/(sk-|ghp_|glpat-|AKIA|dop_v1_)[a-zA-Z0-9_]+/\1***MASKED***/g')
    echo "$output"
}

# Function to show non-sensitive environment
function show_env() {
    echo "üîí BLUX10K Environment (secrets masked):"
    env | grep -E '(BLUX10K|ZSH|XDG|EDITOR|BROWSER|LANG|TZ)' | while read line; do
        mask_secrets "$line"
    done
}

# Run validation on load (optional)
# validate_env

############################################################################
# 9) FINAL SETUP
############################################################################

# Add private binaries to PATH
export PATH="$HOME/.config/private/bin:$PATH"

# Source additional private scripts
if [[ -f ~/.config/private/aliases.zsh ]]; then
    source ~/.config/private/aliases.zsh
fi

if [[ -f ~/.config/private/functions.zsh ]]; then
    source ~/.config/private/functions.zsh
fi

# Final security check
if [[ "$BLUX10K_ENV" == "development" ]]; then
    echo "üîì BLUX10K development environment loaded"
else
    echo "üîí BLUX10K private environment loaded successfully"
fi

# Security reminder
if [[ -n "$GITHUB_TOKEN" && "$GITHUB_TOKEN" == *"xxxxxxxx"* ]]; then
    echo "‚ö†Ô∏è  Remember to replace example values with your actual credentials!"
fi